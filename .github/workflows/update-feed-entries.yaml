name: Update Feed Entries

on:
  # schedule:
  #   - cron: '30 4 * * *'
  workflow_dispatch:

permissions:
  contents: read

jobs:
  update:
    runs-on: ubuntu-latest
    timeout-minutes: 3

    steps:
    - uses: actions/checkout@v4

    - uses: denoland/setup-deno@v1
      with:
        deno-version: v1.x
    
    - run: deno task updateEntries
      env:
        DENO_KV_URL: https://api.deno.com/databases/8506d5ec-e736-4231-addd-134193545071/connect
        DENO_KV_ACCESS_TOKEN: ${{ secrets.DENO_KV_ACCESS_TOKEN }}
